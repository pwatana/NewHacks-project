<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Natural Disaster Live Condition Report</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: Arial, sans-serif;
        }
        .form-container {
            width: 80%;
            max-width: 600px;
            margin-top: 20px;
        }
        h2, h3 {
            text-align: center;
        }
        #map {
            height: 40vh;
            width: 100%;
            margin: 20px 0;
            border: 1px solid #ccc;
        }
        #buttons {
            text-align: center;
            margin-bottom: 20px;
        }
        button {
            margin: 5px;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        #deleteButton {
            background-color: red;
        }
    </style>
</head>
<body>

<div class="form-container">
    <h2>Natural Disaster Live Condition Report Form</h2>
    
    <!-- Map Section -->
    <div id="map"></div>
    <div id="buttons">
        <button id="gpsButton">Place Marker at My Location</button>
        <button id="manualButton">Enable Manual Placement</button>
        <button id="deleteButton">Delete Marker</button>
    </div>

    <!-- Form Section -->
    <form action="#" method="post">
        <!-- Basic Information -->
        <div class="section">
            <h3>Basic Information</h3>
            <label for="reporterName">Reporter Name:</label>
            <input type="text" id="reporterName" name="reporterName" required>
            </div>
            <label for="contactInfo">Contact Information (Phone, Email, etc.):</label>
            <input type="text" id="contactInfo" name="contactInfo" required>
        </div>

        <!-- Disaster Type -->
        <div class="section">
            <h3>Disaster Type</h3>
            <label><input type="radio" name="disasterType" value="Earthquake" required> Earthquake</label>
            <label><input type="radio" name="disasterType" value="Flood"> Flood</label>
            <label><input type="radio" name="disasterType" value="Wildfire"> Wildfire</label>
            <label><input type="radio" name="disasterType" value="Hurricane"> Hurricane/Typhoon</label>
            <label><input type="radio" name="disasterType" value="Tornado"> Tornado</label>
            <label><input type="radio" name="disasterType" value="Landslide"> Landslide</label>
            <label><input type="radio" name="disasterType" value="Volcano"> Volcanic Eruption</label>
            <label><input type="radio" name="disasterType" value="Other"> Other</label>
        </div>

        <!-- Current Observations -->
        <label>Visible Hazards:</label>
            <div class="form-container">
                <div>
                    <label><input type="checkbox" name="hazards" value="Flooded Roads"> Flooded roads</label>
                </div>
                <div>
                    <label><input type="checkbox" name="hazards" value="Fallen Trees"> Fallen trees</label>
                </div>
                <div>
                    <label><input type="checkbox" name="hazards" value="Damaged Buildings"> Damaged buildings</label>
                </div>
                <div>
                    <label><input type="checkbox" name="hazards" value="Power Lines"> Power lines down</label>
                </div>
                <div>
                    <label><input type="checkbox" name="hazards" value="Blocked Roads"> Blocked exits or roads</label>
                </div>
                <div>
                    <label><input type="checkbox" name="hazards" value="Other"> Other</label>
                </div>
            </div>

            <label for="casualties">Casualties or Injuries Reported?</label>
            <select id="casualties" name="casualties">
                <option value="No">No</option>
                <option value="Yes">Yes</option>
            </select>

            <label for="propertyDamage">Property Damage Severity:</label>
            <select id="propertyDamage" name="propertyDamage">
                <option value="Minimal">Minimal</option>
                <option value="Moderate">Moderate</option>
                <option value="Severe">Severe</option>
                <option value="Catastrophic">Catastrophic</option>
            </select>
        </div>

        <!-- Immediate Needs -->
        <div class="section">
            <h3>Immediate Needs</h3>
            <div class="form-container">
                <!-- Temporary Shelter Question -->
                <div class="section">
                    <label>Do you have a temporary shelter?</label>
                    <input type="radio" name="shelter" value="yes"> Yes
                    <input type="radio" name="shelter" value="no"> No
                </div>
            
                <!-- Access to Food Question -->
                <div class="section">
                    <label>Do you have access to food?</label>
                    <input type="radio" name="food" value="yes"> Yes
                    <input type="radio" name="food" value="no"> No
                </div>
            
                <!-- Access to Water Question -->
                <div class="section">
                    <label>Do you have access to water?</label>
                    <input type="radio" name="water" value="yes"> Yes
                    <input type="radio" name="water" value="no"> No
                </div>
            
                <!-- Access to Electricity Question -->
                <div class="section">
                    <label>Do you have access to electricity?</label>
                    <input type="radio" name="electricity" value="yes"> Yes
                    <input type="radio" name="electricity" value="no"> No
                </div>
            </div>
            

        </div>

        <!-- Additional Notes -->
        <div class="section">
            <h3>Additional Notes or Description of Conditions</h3>
            <label for="additionalNotes">Notes:</label>
            <textarea id="additionalNotes" name="additionalNotes" rows="4"></textarea>
        </div>

        <!-- Verification -->
        <div class="section">
            <h3>Verification</h3>
            <label for="photoVideo">Photo/Video Attached?</label>
            <select id="photoVideo" name="photoVideo">
                <option value="No">No</option>
                <option value="Yes">Yes</option>
            </select>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="submit-button">Submit Report</button>
    </form>
</div>

<script>
    const map = L.map('map').setView([43.66464895584507, -79.39972218955619], 15);
    let marker = null;
    let manualPlacementEnabled = false;

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Place marker at user's GPS location
    document.getElementById("gpsButton").addEventListener("click", () => {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((position) => {
                const userLocation = [position.coords.latitude, position.coords.longitude];
                map.setView(userLocation, 13);
                if (marker) map.removeLayer(marker);
                marker = L.marker(userLocation).addTo(map).bindPopup("Your Location").openPopup();
            });
        } else {
            alert("Geolocation is not supported by this browser.");
        }
    });

    // Enable manual placement mode
    document.getElementById("manualButton").addEventListener("click", () => {
        manualPlacementEnabled = true;
        alert("Click on the map to place the marker.");
    });

    // Manual marker placement
    map.on('click', (e) => {
        if (manualPlacementEnabled) {
            if (marker) map.removeLayer(marker);
            marker = L.marker(e.latlng).addTo(map).bindPopup("Your Selected Location").openPopup();
            manualPlacementEnabled = false;
        }
    });

    // Delete marker
    document.getElementById("deleteButton").addEventListener("click", () => {
        if (marker) {
            map.removeLayer(marker);
            marker = null;
        }
    });
</script>

</body>
</html>